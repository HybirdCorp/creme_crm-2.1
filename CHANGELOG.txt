== Version 1.4 ==

  Users side :
  ------------
    # The HeaderFilter (listviews Views) form has a new UI :
        - You can now choose the order for all columns.
        - The UI is more compact and friendly (filter, search, drag n' drop).
    # Customisable object & relation blocks. You can choose the same fields as in HeaderFilter form (& the UI is very close too).
    # EntityFilter :
        - A new condition is available for ForeignKeys to User : current user.
        - The operators are now filtered according to the selected field's type (regular & custom fields).
        - Enumerable field choices are now displayed in a combobox (instead of a simple text field).
    # CSV import can now update existing entities instead of always creating them ; you can select several fields that act as a key.
    # The 'Ice cream' theme has been improved again : better contrast, separation lines, drop shadows...
    # There are some User management enhancements :
        - The super users can now deactivate common users from creme_config (ie: in a graphical manner).
        - The field User.is_staff is now used by Creme : the staff users are hidden from other users, and they cannot be selected to own entities for example.
          The staff users are used to help the other users, but they should not participate in the business.
          Staff users are created by the django command 'createsuperuser' (but the first super user created after the syncdb command is not a staff user).
    # Minor UI improvements in forms :
        - Labels for submit buttons are now better ; for example 'Save the contact' instead of 'Submit' in the Contact creation form.
        - A 'Cancel' button is available in lots of forms.
        - A new JavaScript widget (CheckListSelect) is now used for multi-selecting without ordering : it uses check boxes and allows filtering/searching.
        - The order of the buttons in popups is now : OK/Cancel.
        - A new field to select several entities MultiCreatorEntityField replaces MultiCremeEntityField (but it does not allow inline creation yet).
    # Improved CSS for list views (fields are aligned differently according to their type).
    # A new pager for blocks has been added ; it manages large numbers of pages better.
    # A new command, called 'creme_uninstall', has been added : it can uninstall a Creme app in the good way.
    # A Unicode Collation Algorithm (derived from pyuca) is used to sort :
        - The apps in the menu, the creme_config portal, the UserRoles configuration.
        - The fields in the HeaderFilter form & in the search configuration.
        - The ContentTypes in <select>.
        - ...
    # JavaScript : some fallbacks for IE8 & 9 have been added. The support of IE 7 has been dropped.
    # The column titles in the list views are always up-to-date (before, they were computed during columns edition).
    # The error handling in inner popups has been improved.
    # A view for 409 errors has been created.
    # Apps :
        * Polls, a new app :
            - You can create a PollForm, which contains questions organised in sections, sub-sections etc...
            - Questions have a type (string, integer, boolean, enumeration...).
            - Questions can have conditions on previous questions : a question is activated only if its conditions are filled.
            - You can create several PollReplies from a PollForm, which snapshot the questions of the form.
            - A PollReply can be filled with a wizard, and answers can be edited later.
            - The PollReplies can be grouped by PollCampaigns.
        * Reports :
            * When you create a new Report, you can only select the columns from an existing HeaderFilter.
            * A new UI for the columns edition has been added, and it uses the work on the new HeaderFilter form.
            * ReportGraphs :
                - The form has been improved. Example : the field 'Is count' is already checked if there is no available aggregable field.
                - Only the ForeignKeys related to enumerable models are available (see the notes on 'enumerable' tag below) for the abscissa.
                - CustomFields are now available for abscissa & ordinate.
                - The graph design has been heavily enhanced. The data is emphasized by a clearer display :
                  many useless/annoying visual elements were removed, legends are better, many glitches were fixed...
            * Several behaviours have been fixed :
                - The column titles are now always up-to-date (before, they were computed during columns edition).
                - The 1st level entities are filtered by credentials ('view' permission).
                - When a FK field is linked to a sub-report, if a related entity does not pass the subfilter, the line is not dropped any more (related values are just empty).
                - The flattened sub-reports (ie not expanded, see 'selected' attribute) in columns associated to ManyToManyField/ForeignKey/related fields are now used.
                - The flattened sub-reports manage now all types of columns.
                - The aggregates are computed in a scope (so result may be different with an aggregate in a sub-report). 
            * Invalid columns are automatically removed (eg: removed CustomField).
        * Activities, the calendar has been heavily improved :
            * The version of fullcalendar.js has been updated from 1.4.5 to 1.4.7.
            * A new menu has been created, with :
                - Floating activities ; they can be drag n' dropped on the calendar, and filtered by their name.
                - All your calendars & the public calendars of all the other users.
                  Several calendars can be shown together (they have different colors) and they can be filtered by their name, or the first name and last name of their owner.
        * Billing :
            - The creation and the edition of billing lines have been redesigned, in order to use more client side computation.
            - A new field 'acceptation_date' (DateField) has been added to the Quote model.
            - A new field 'pending_payment' (BooleanField) has been added to the InvoiceStatus model.
            - 3 function fields are dynamically added by the 'billing' app to the models Organisation and Contact :
                - Total of pending payment.
                - Total number of won quotes this year.
                - Total number of won quotes last year.
        * Opportunities :
            - Opportunity.target field is now editable.
        * Products:
            - 'images' are now displayed in a true block (Products & Services).
        * Projects :
            - The Project.name field is not nullable anymore.

  Developpers side :
  ------------------
    Non breaking changes :
    ------------------
        # A new field tag has been created : 'enumerable'. When a ForeignKey is tagged as enumerable, it means that the related model
          can be enumerated, ie there are a limited number of instances. Eg : persons.models.Position are enumerable, but not persons.models.Address.
        # JavaScript :
            * A basic object derivation support (see creme.component.Component) has been added.
            * A simple event handling tool (creme.component.EventHandler) has been added.
            * The 'disabled' attribute now works with widgets.
            * The following widgets use collection models and new rendering tools :
                - CheckListSelect.
                - PolymorphicSelect.
                - DynamicSelect.
            * The popup system has been refactored :
                - creme.utils.simpleConfirm() is deprecated ; use creme.dialogs.confirm() instead.
                - You should use creme.utils.showInnerPopup() only for compatibility with actual popup templates (see creme_core/templates/creme_core/inner_popup.html)
                - creme.dialog.Dialog is the new base dialog object.
                - creme.dialog.ConfirmDialog shows a message and has OK/Cancel buttons.
                - creme.dialog.FormDialog has Save/Cancel buttons and handles form errors.
                - creme.dialog.SelectDialog has OK/Cancel buttons and an API to return a value when it is closed.
                - Many helper functions were added in creme.dialogs.
            * The AJAX actions have been improved :
                - creme.utils.postNReload() is deprecated ; use creme.blocks.ajaxPOSTQuery() instead.
                - A new API for requests has been added : creme.ajax.Query.
                - Many helper functions were added in creme.utils and creme.blocks for AJAX actions with confirmation, reloading and error dialogs.
        # New form fields were added : MultiCTypeChoiceField & MultiEntityCTypeChoiceField. They use the cache of ContentType.
        # CremeEntityField & MultiCremeEntityField form fields are now deprecated ; ListViewWidget too.
          use CreatorEntityField & MultiCreatorEntityField instead.
        # The function creme_core.utils.Q_creme_entity_content_types() is now deprecated.
        # The old migration scripts have been folded.
        # Apps :
            * Activities :
                - Calendar now has a field 'color'.
            * Billing:
                - The following constants are deprecated : PERCENT_PK, AMOUNT_PK & DISCOUNT_UNIT.
            * Opportunities:
                - The methods Opportunity.get_target() & Opportunity.get_source() are now deprecated.
            * Reports :
                - The code has been heavily refactored, and a lot of work is now done in the new reports.core module.

    Breaking changes :
    ------------------
        # The model HeaderFilterItem has been removed, & HeaderFilter now stores the columns in a new field called 'json_cells'.
          It contains a JSON serialisation of instances of the new class EntityCell (which is used by new configurable blocks too).
          So the HeaderFilter.create() static method has changed : it takes EntityCells instances now.
        # The global_info 'username' (string) has been replaced by 'user' (User instance).
        # The JavaScript function creme.utils.loadBlock() has been removed ; use creme.blocks.reload() instead.
        # 3 useless views in creme_core have been removed :
            - /creme_core/entity/get_fields
            - /creme_core/entity/get_function_fields
            - /creme_core/entity/get_custom_fields
        # The method Relation.update_links() has been removed (it was deprecated).
        # 2 Relation URLs have been modified :
            - /creme_core/relation/entity/.../predicates/json       ==> /creme_core/relation/entity/.../rtypes/json
            - /creme_core/relation/predicate/.../content_types/json ==> /creme_core/relation/type/.../content_types/json
        # The function creme_core.utils.currency_format.currency() can now take a Currency instance instead of a Currency ID ;
          idem with the templatetag 'format_amount'.
          API breaking : 'currency_id' argument changed to 'currency_or_id'. 
        # The unused form field _CommaMultiValueField has been removed.
        # Several elements in creme_core.utils.meta have been deleted :
            * The exception class NotDjangoModel.
            * The functions :
                - get_function_field_verbose_name.
                - get_related_field_verbose_name.
                - filter_entities_on_ct.
                - get_fk_entity.
                - get_m2m_entities.
                - _get_entity_column.
        # In titles of blocks (inside {%get_block_header%}) the "collapser" css class is no longer needed and will cause issues.
        # Apps :
            * Activities :
                - The field ActivityType.color has been removed.
                - The JS function creme.activities.calendar.setReadableColor() has been removed.
            * Media_managers :
                - ImageM2MWidget has been removed.
            * Billing :
                - The Vat model has been moved to creme_core.
            * Reports :
                * About the reports.Field model :
                    - The field 'report' has been renamed to 'sub_report'.
                    - The field 'title' has been removed.
                    - A new ForeignKey field 'report' has been added in order to replace the field Report.columns (ManyToManyField).
                * Several useless templatetags were removed :
                    - get_report_chart.
                    - get_report_chart_selectors.
                    - verbose_abscissa.
                    - verbose_ordinate.
            * Emails :
                * Lots of changes in its JS file :
                    - creme.reload_synchronisation() has moved to creme.ajax.reloadContent().
                    - creme.emails.mass_action() was replaced by creme.blocks.massAction() (arguments are different).
                    - creme.emails.mass_relation() was replaced by creme.blocks.massRelation() (arguments are different).
                    - creme.emails._processDone() has been removed.
                    - creme.emails.resend() & creme.emails.confirmResend() have no 'url' & 'complete_cb' arguments anymore.


== Version 1.3 ==

  Users side :
  ------------
    # Form widgets improvements :
        * New selector widgets, that can also create instances (and automatically
          select the newly created instances).
            - For small models, like persons.Sector or billing.InvoiceStatus (used almost everywhere).
            - For Entities, like the Document chosen in the CSV import (used only in a few places).
        * Auto-completion (thanks to chosen.js) in some widgets (Relationships creators).
        * Cache system used by some widgets (Relationships creators, Entities selectors).
    # New feature : Trash, that contains deleted Entities. These entities are generally not displayed (in list views for example), they have a different detailview, and can be definitively deleted.
    # Credentials improvements:
        * New implementation that is much faster (no more SQL JOIN).
        * The GUI to set the credentials has been improved.
    # History: new events are logged.
        - Relationship deletion.
        - Property deletion.
        - Creation, edition & deletion of auxiliary instances (ToDo, Bill line etc...).
    # The version of Django is now 1.4 :
        - All datetimes use now timezones. Each user can choose its own timezone in its configuration panel.
        - Translations contexts are now possible in the templates, so several labels have been fixed.
    # Entities can now be imported & exported with the XLS format (previously, only CSV format was available) ; thanks to libs 'xlrd' & 'xlwt'.
    # The theme 'Icecream' has been reworked (icons, css).
    # The 403 view has been improved : it is more beautiful, and it now displays
      the problematic dependencies when a deletion fails.
    # Many fallbacks for IE(7,8) were added.
    # Apps :
        * Activities :
            - PhoneCall, Meeting & Tasks models has been removed, their data were moved in the Activity model.
            - Activities can now have a SubType (eg: 'Incoming' for PhoneCalls).
            - You can now omit the start & end dates (then, Activity is floating) or only give the dates but not the hours (floating time).
            - The Relationship "is subject of activity" is now only compatible with the following types :
              Contact, Organisation, Invoice, Quote, SalesOrder, Opportunity, Ticket.
            - There is no more popup to choose the RelationType when you create a related Activity (it is automatically chosen).
        * Reports :
            - You can click on the shapes of a graph to go to the corresponding list view.
            - The graph code uses now the lib 'jqplot'.
            - A new graph type is available : tube.
            - Reports can now be downloaded as XLS files (previously, only CSV format was available).
        * Persons :
            - 'Civility.short_cut' field has been added.
            - You can create billing & shipping addresses directly from their block.
        * Billing:
            - CSV import for Invoice/Quote/SalesOrder is now OK.
            - 'expiration_date' field is no more required in forms.
        * Opportunities :
            - The fields 'Origin.description' & 'SalesPhase.description' have been removed.
            - CSV import is now OK.
        * Commercial:
            - Objectives: Entities can now be counted with a Filter.
        * Documents :
            - 'Folder.description' field is now nullable (ie: no more required).
        * VCFS :
            - Can export a Contact as a VCF file.

  Developpers side :
  ------------------
    # The project layout has changed with Django 1.4 :
        - Apps are imported with namespace 'creme' (eg: 'creme.persons' instead of 'persons').
        - The script 'manage.py' is now at the root of the project.
    # Root 'urls.py' generates now automatically urls of all Creme apps : so you don't have to modify this file when you add an app anymore.
    # Credentials changes:
        * Permissions method in CremeEntity are now deprecated, and replaced by new methods in User.
            - CremeEntity.can_*{_or_die} methods are deprecated : use User.has_perm_to_*{_or_die} methods instead.
            - CremeEntity.populate_credentials is deprecated (delete the uses, because they are now useless).
        * The view creme_core.views.generic.edit.edit_model_with_popup() checks now the CremeEntity edition credentials (when the given model is a CremeEntity of course).
        * The credentials on models are now possible (eg: you can know if the user could link a Contact that is not created yet).
    # Lots of changes in creme_core.utils.meta :
        - New system of tags for models fields. Right now, 2 tags are available : 'viewable' & 'clonable'.
        - The following functions have been removed : get_flds_with_fk_flds(), get_flds_with_fk_flds_str().
        - The following functions have been renamed : 
            get_field_infos() became get_instance_field_info()
            get_model_field_infos() became get_model_field_info()
    # In CremeAbstractEntity class 'excluded_fields_in_html_output' and 'header_filter_exclude_fields' attributes have been removed (tags are used instead).
    # New attribute in CremeModel (so, in CremeEntity), 'creation_label', that contains the (localized) string used by forms, buttons etc... that create instances.
    # The code manages better the invalidation of model fields.
      HeaderFilters, EntityFilters & Histories check now at runtime if they handle invalid fields (and they modificate themselves to ignore them).
    # New model field : 'CTypeForeignKey'. It uses the cache of ContentType manager, when ForeignKey(ContentType, ...) does not.
    # Unit tests for JavaScript code.
    # Blocks system :
        - Dependencies can be '*' (that means: "all models").
        - New attribute 'read_only' (boolean) ; if it is set to True, reloading this block will not force the blocks which share its dependencies to be reloaded too.
        - The 2 previous features are used by creme_core.blocks.HistoryBlock.
        - New templatetag 'get_block_footer'.
    # Relation model:
        - The method update_links() is now deprecated.
        - The unused method getCreateLang() has been removed.
        - __unicode__() no more returns an HTML string.
    # The arguments of the command 'creme_populate' have changed, in order to be like other django commands.
    # New command : 'i18n_overload'. It can generate a .po file with all MSGIDs that contain a given word (in order to overload a term).
        - 'verbosity' is now an integer, given with 'verbosity=VERBOSITY' (no more '-v' argument).
        - App names are simply the final arguments (no more '-a' argument).
    # FormBlock has been improved : you can now iterate on blocks that have not been retrieved 'manually'.
    # The unused view '/creme_core/entity/json' has been removed.
    # The form widget 'UploadedFileWidget' has been removed.
    # The setting DEFAULT_EMAIL_FOR_REMIND has been deleted ; DEFAULT_USER_EMAIL is used instead.
    # Apps :
        * Opportunities :
            - Opportunit.emitter & Opportunit.target properties added.
        * Emails : settings have changed.
            - CREME_EMAIL_SERVER => EMAILCAMPAIGN_HOST
            - CREME_EMAIL_PORT => EMAILCAMPAIGN_PORT
            - CREME_EMAIL_USERNAME => EMAILCAMPAIGN_HOST_USER
            - CREME_EMAIL_PASSWORD => EMAILCAMPAIGN_PASSWORD
            - EMAILCAMPAIGN_USE_TLS => added
            - SENDING_SIZE => EMAILCAMPAIGN_SIZE
            - SENDING_SLEEP_TIME => EMAILCAMPAIGN_SLEEP_TIME
        * Reports :
            - The templatetags files 'report_tags.py' and 'graph_tags.py' have been merged in 'reports_tags.py'
            - Several templatetags have been removed: get_column_header, get_html_column_value, get_value_at.



== Version 1.2 ==

  Users side :
  ------------
    # New inner edition feature : the most fields can be edited directly in the detail/list views.
    # A new view that merges 2 entities.
    # Light batch process : several entities returned by a filtered are modified with the same pattern :
        - String actions : 'To upper case', 'To lower case', 'Prefix', 'Suffix', 'Remove a sub-string'...
        - Integer actions : 'Add', 'Subtract', 'Multiply', 'Divide'.
    # New SemiFixedRelationType model that allows to accelerate the creation of Relation when one branch is always the same.
    # The deletion of small models (status/sector etc...) is better managed (protected or FK are set to NULL).
    # CSV import : the 'dialect' of the CSV file is now guessed.
    # Apps :
        * Emails :
            - The raw text and the HTML text of the bodies of emails (standalone ones and grouped by campaigns ones) can be written separately.
            - A standalone email can be created from a template as base.
        * Billing :
            - Line management was improved : you can create/edit/delete several lines at once.
            - Line fields can be edited directly.
            - Status of Invoice/Quote/Sales Order/Credit Note are ordered by config.
            - Numbers of Invoices are now editable, and all status can be chosen at creation.
        * Activities :
            - List views for meetings and phone calls.
            - Activities can be created directly in the Calendar view.
            - The view to add participants from the detailview of an Activity has been improved (it manages users like in the Activity creation view).
        * Assistants :
            - New FunctionFields for 'Todos', Memos' & 'Alerts'.
        * Opportunities :
            - Sales Phases are ordered by configuration.
        * Persons :
            - First name is no more required.
            - Siren is now unique or empty.
            - When the photograh is deleted, the Contact is no more deleted (FK is set to NULL).
        * Documents:
            - When a Folder is not empty, it can not be deleted any more (old behaviour: all the Documents in the Folder were deleted too).
        * Commercial:
            - The relationship type 'is related to the opportunity' has been removed.
    # Bug fixes :
        * Creme_config: only superusers can create/edit Users.
        * Activities: 'participates' relationship is now internal (to manage correctly Calendars).
        * Internal relationships are no more automatically cloned (eg: it caused problems when cloning an Organisation targeted by an Invoice).
        * Some HTML escaping problems fixed.
        * ...

  Developpers side :
  ------------------
    # Upgrade to jquery 1.6.2 & jquery ui 1.8.15.
    # Improvements for FunctionFields (old API is broken) :
        * Return FunctionFieldResult objects (which can be easily serialised in HTML & CSV outputs).
        * Can now easily inject FunctionFields in a model.
    # In Billing app, the Line API was changed to be less error-prone (old API is broken).
    # Creme_config : handles automatically the ordering of models with a field 'order'.
    # The API of instance blocks has changed.
    # The API of BulkUpdateRegistry has changed.



== Version 1.1 ==

  Users side :
  ------------
    # Blocks :
        * New blocks :
            - 'History' (timeline).
            - 'Received billing documents'.
        * Blocks with state (open/close & show/hide empty fields) :
            - Blocks are now faded when folded ; icon is reduced, and buttons reduced.
            - Empty fields can be hidden.
        * New blocks locations system :
            - Nearly all blocks are now configurable (can be placed, or even removed).
            - Detailviews : the blocks can be located on top, left side, right side or bottom.
            - Portal & home : are now separated from the content types blocks configuration.
            - New view "My page" : it looks like the "Home" view, but each user can set the present blocks.
        * All relations blocks are reloaded when a change occurs on a block dependent from relations.
    # Deletion of users (& teams) with files assignation to an other user.
    # UI :
        * Improved scrolling for the side menu.
        * Portals have not yet the same name in the prefered menu.
        * Can delete all (allowed) relations on relation block in one click.
        * Lots of choices are now smartly ordered (eg: predicates in relation creation popup).
    # Credentials improved :
        * Credentials by type of Entity (ContentType).
        * Exportable types credentials (to export a listview for these types as CSV files).
    # Theme manager ; 2 themes are embedded : the old one become "Chantilly", and a new one has been created ("Ice cream").
    # Apps :
        * Crudity :
            - Crudity can handle forms submitted by infopath.
            - Multi-line in Crudity emails and better dates handling.
            - Crudity sandbox can be by user.
            - Parser improved.
        * Billing : currency management. For each billing Entity you choose the currency, and the displays of amounts are better.
        * Activesync : Can limit mobile synchronization to contacts or calendars.
        * Vcfs (NEW app) : you can now import a Contact (and the related Organisation) from a vCard.
    # Bug fixes :
        * Credentials problem in billing lines.
        * Billing lines were not added to the billing documents created from an Opportunity with related Products/Services.
        * Image file duplicated when an Image was edited.
        * ...

  Developpers side :
  ------------------
    # Helper methods to build HeaderFilterItem objects.
    # Template tag 'get_html_field_value' replaced by a new one, 'print_field'.
    # New object block system: all blocks (at least on detailviews) are now 'true' blocks.
    # Database migration system with South.
    # Django official version for Creme is now 1.3.
    # Deletion system is now better (thanks to Django 1.3) :
        * New delete handlers for FK.
        * Delete management for models with internals relations types.
        * Base delete can handle auto file deletion.
    # Removed Lock model & add Mutex model.
    # Configuration portal of an app can be generated with only SettingKey/SettingValue.
    # User settings blocks are now registrable in creme_config.
    # Fix the small but annoying bugs that prevented Creme to run correctly with PostgreSQL.
    # Documentation for people who want to install Creme on Windows.
    # Code clean-up (in .js files for example), lots of unit tests were added.
