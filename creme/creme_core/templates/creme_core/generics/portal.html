{% extends "creme_core/base.html" %}
{% load i18n %}
{% load creme_block creme_core_tags %}

{% block extrahead %}
    <script>
        // TODO : move this in creme.blocks and initialize with bindEvents method
        $(document).ready(function(){
            creme.utils.bindShowHideTbody();
        });
    </script>
{% endblock %}

{% block before_content_1 %}<div class="portal the_cake_is_a_lie">{% endblock %}

{% block content %}
    <table class="table_header" cellpadding="0" cellspacing="0">
        <tr>
            <td class="logo">{% block logo %}{% endblock %}</td>
            <td class="title"><h1>{% block title %}{% endblock %}</h1></td>
            <td class="actions">
                {% block header_link %}
                    <a href="{% block list_url %}{% endblock %}">
                        {% block list_msg %}{% endblock %}
                        {% trans "Go to the list" as img_title %}<img src="{% creme_media_url 'images/next_64.png' %}" title="{{img_title}}" alt="{{img_title}}"/>
                    </a>
                {% endblock %}
            </td>
        </tr>
    </table>

    {% if config_url %}
        <div>
            <ul class="button_list hbox">
                <li>{% trans "Configure" as config_label %}
                    {% if can_admin %}
                        <a class="menu_button" href="{{config_url}}">
                            <img src="{% creme_media_url 'images/config_32.png' %}" border="0" title="{{config_label}}" alt="{{config_label}}" />{{config_label}}
                        </a>
                    {% else %}
                        <span class="menu_button forbidden" title="{% trans "forbidden" %}">
                            <img src="{% creme_media_url 'images/config_32.png' %}" border="0" title="{{config_label}}" alt="{{config_label}}" />{{config_label}}
                        </span>
                    {% endif %}
                </li>
            </ul>
        </div>
    {% endif %}

    {% block creme_blocks_import %}
        {% import_portal_blocks app_name %}
    {% endblock %}

    {% block before_statistics %}{% endblock %}

    {% block statistics %}
        <table class="table_detail_view ui-corner-all">
            {% get_block_header colspan=2 %}
                <th class="label">{% get_basic_block_header _('Statistics') 'info_48.png' _('Information') %}</th>
                <th class="actions"></th>
            {% end_get_block_header %}
            <tbody class="collapsable">
                {% for statk, statv in stats %}
                    <tr class="content">
                        <th class="{% cycle "block_header_line_dark" "block_header_line_light" %} th_info">{{statk}}</th>
                        <td class="{% cycle "block_line_dark" "block_line_light" %} td_info">{{statv}}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endblock statistics %}

    {% block extra_infos %}
        {% display_portal_blocks ct_ids %}
    {% endblock %}

    {% get_blocks_dependencies %}
{% endblock %}

{% block after_content_3 %}</div>{% endblock %}
