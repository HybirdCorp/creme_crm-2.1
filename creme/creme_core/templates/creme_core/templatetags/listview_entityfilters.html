{% load i18n creme_core_tags %}
<fieldset title="{% trans "Filter the lines of the table" %}">
    <div class="legend">
        {% trans "Filter" as label %}<img border="0" src="{% creme_media_url 'images/filter_32.png' %}" alt="{{label}}" title="{{label}}"/>{{label}}
    </div>
    <select name="filter" id="list_filter" onchange="$(this.form).list_view('getSubmit')(this);">
        <option value="">{% trans "All" %}</option>
        {% for efilter in entity_filters %}
            <option value="{{efilter.id}}" {% if efilter_id == efilter.id %}selected{% endif %}>{{efilter.name}}</option>
        {% endfor %}
    </select>
    {% if not is_popup_view %}
{#        <a href="/creme_core/entity_filter/add/{{content_type_id}}"> #}
        <a href="{% url 'creme_core__create_efilter' content_type_id %}">
            {% trans "Create a custom filter" as img_title %}<img border="0" src="{% creme_media_url 'images/add_22_button.png' %}" alt="{{img_title}}" title="{{img_title}}"/>
        </a>
        {% comment %}{% if can_edit_or_delete %}{% endcomment %}
        {% if can_edit %}
{#            <a href="/creme_core/entity_filter/edit/{{efilter_id}}" id="filter_edit"> #}
            <a href="{{entity_filters.selected.get_edit_absolute_url}}" id="filter_edit">
                {% trans "Edit custom filter" as img_title %}<img border="0" src="{% creme_media_url 'images/edit_22_button.png' %}" alt="{{img_title}}" title="{{img_title}}"/>
            </a>
        {% endif %}
        {% if can_delete %}
{#            <a onclick="creme.lv_widget.deleteEntityFilter($(this).parents('form:first'), '{{efilter_id}}');"> #}
            <a onclick="creme.lv_widget.deleteFilter($(this).parents('form:first'), '{{efilter_id}}', '{% url 'creme_core__delete_efilter' %}');">
                {% trans "Delete custom filter" as img_title %}<img border="0" src="{% creme_media_url 'images/delete_22_button.png' %}" alt="{{img_title}}" title="{{img_title}}"/>
            </a>
        {% endif %}
    {% endif %}
</fieldset>
