{% load i18n creme_core_tags creme_widgets %}

{% log '"creme/activities/templates/activities/templatetags/activity_relations_field.html" is deprecated.' level='WARN' %}

{% with relations|length as count %}
    {% if not count %}
        {% trans "No entity" %}
    {% elif count == 1 %}
        {% widget_entity_hyperlink relations.0.object_entity.get_real_entity user %}
    {% elif count <= 3 %}
        <ul class="compact_list">
            {% for relation in relations %}<li>{% widget_entity_hyperlink relation.object_entity.get_real_entity user %}</li>{% endfor %}
        </ul>
    {% else %}
        ({{count}})
    {% endif %}
{% endwith %}